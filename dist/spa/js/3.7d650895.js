(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"420b":function(e,t,a){"use strict";a("ec17")},"8d93":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",[a("create-post-panel")],1)},s=[],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"camera-frame rounded-borders shadow-4 q-pa-sm"},[a("transition",{attrs:{name:"capture",mode:"out-in",absolute:""}},[a("video",{directives:[{name:"show",rawName:"v-show",value:!e.isImageCaptured,expression:"!isImageCaptured"}],ref:"video",attrs:{autoplay:"",crossorigin:""}})]),a("transition",{attrs:{name:"capture",mode:"out-in",absolute:""}},[a("canvas",{directives:[{name:"show",rawName:"v-show",value:e.isImageCaptured,expression:"isImageCaptured"}],ref:"canvas"})])],1),a("div",{staticClass:"camera-input-row row justify-center text-center q-my-md"},[a("div",{staticClass:"col-12 col-sm-6"},[e.hasCameraSupport?a("q-btn",{class:{ready:e.isPostReadyToSend},attrs:{icon:e.isImageCaptured?"eva-trash":"eva-camera",size:e.$q.screen.xs?"18px":"24px",color:"primary",round:""},on:{click:e.captureDeleteCameraStramFrame}}):a("q-btn",{class:{ready:e.isPostReadyToSend},attrs:{icon:e.isImageCaptured?"eva-trash":"eva-upload-outline",size:e.$q.screen.xs?"18px":"24px",color:"primary",round:""},on:{click:e.showFilePicker}}),a("q-file",{ref:"fileInput",staticStyle:{display:"none"},attrs:{accept:"image/*"},on:{input:e.captureDeleteLocalImageFile},model:{value:e.localStorageImage,callback:function(t){e.localStorageImage=t},expression:"localStorageImage"}}),a("q-btn",{directives:[{name:"show",rawName:"v-show",value:e.isPostReadyToSend,expression:"isPostReadyToSend"}],class:{ready:e.isPostReadyToSend},attrs:{color:"primary",icon:"eva-cloud-upload-outline",size:e.$q.screen.xs?"18px":"24px",round:""},on:{click:e.createPost}})],1)]),a("div",{staticClass:"row justify-center"},[a("div",{staticClass:"col-12 col-sm-6"},[a("q-input",{staticClass:"col-12 q-my-sm",attrs:{label:"Location",type:"text",dense:""},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-btn",{attrs:{color:"primary",icon:"eva-navigation-2-outline",flat:"",round:""},on:{click:e.getUserLocation}})]},proxy:!0}]),model:{value:e.post.location,callback:function(t){e.$set(e.post,"location",t)},expression:"post.location"}}),a("q-input",{staticClass:"col-12 q-my-sm",attrs:{label:"Caption",type:"text",dense:""},model:{value:e.post.caption,callback:function(t){e.$set(e.post,"caption",t)},expression:"post.caption"}})],1)])])},n=[],r=(a("e260"),a("c19f"),a("ace4"),a("d3b7"),a("ac1f"),a("1276"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("1732"));a("121f");var c={name:"AppCreatePostPanel",beforeMount:function(){this.initCamera()},data:function(){return{hasCameraSupport:!0,isImageCaptured:!1,localStorageImage:[],post:{id:Object(r["a"])(),location:"",caption:"",photo:null,created_at:Date.now()}}},computed:{isPostReadyToSend:function(){return console.log(!!(this.post.photo&&this.post.location&&this.post.caption)),!!(this.post.photo&&this.post.location&&this.post.caption)}},methods:{initCamera:function(){var e=this;console.log("Init camera"),navigator.mediaDevices.getUserMedia({video:!0}).then((function(t){e.$refs.video.srcObject=t})).catch((function(t){e.hasCameraSupport=!1}))},showFilePicker:function(){this.isImageCaptured?(this.localStorageImage=null,this.post.photo=null,this.isImageCaptured=!1):this.$refs.fileInput.$el.click()},captureDeleteCameraStramFrame:function(){if(this.post.photo=null,!this.isImageCaptured){var e=this.$refs.video,t=this.$refs.canvas,a=t.getContext("2d");t.width=e.getBoundingClientRect().width,t.height=e.getBoundingClientRect().height,a.drawImage(e,0,0,t.width,t.height),this.post.photo=this.dataURItoBlob(t.toDataURL())}this.isImageCaptured=!this.isImageCaptured},captureDeleteLocalImageFile:function(e){var t=this;if(console.log("file",e),!this.isImageCaptured&&e){var a=this.$refs.canvas,o=a.getContext("2d");this.post.photo=e;var s=new FileReader;s.onload=function(e){var s=new Image;s.onload=function(){a.width=s.width,a.height=s.height,o.drawImage(s,0,0),t.isImageCaptured=!0},s.src=e.target.result},s.readAsDataURL(e)}},dataURItoBlob:function(e){for(var t=atob(e.split(",")[1]),a=e.split(",")[0].split(":")[1].split(";")[0],o=new ArrayBuffer(t.length),s=new Uint8Array(o),i=0;i<t.length;i++)s[i]=t.charCodeAt(i);var n=new Blob([o],{type:a});return n},createPost:function(){},getUserLocation:function(){}}},l=c,p=(a("420b"),a("2877")),u=a("9c40"),d=a("7d53"),m=a("27f9"),h=a("eebe"),f=a.n(h),g=Object(p["a"])(l,i,n,!1,null,null,null),v=g.exports;f()(g,"components",{QBtn:u["a"],QFile:d["a"],QInput:m["a"]});var C={name:"CreatePage",components:{CreatePostPanel:v}},w=C,b=a("9989"),I=Object(p["a"])(w,o,s,!1,null,null,null);t["default"]=I.exports;f()(I,"components",{QPage:b["a"]})},ec17:function(e,t,a){}}]);